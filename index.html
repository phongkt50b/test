<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Công Cụ Minh Họa Phí Bảo Hiểm</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chrono/1.0.5/chrono.min.js"></script>
</head>
<body class="bg-gray-50">
    <div class="container max-w-7xl mx-auto p-6">
        <header class="mb-6 text-center">
            <img src="/assets/aia-logo.png" alt="AIA Logo" class="h-12 mx-auto mb-4">
            <h1 class="text-3xl font-bold text-gray-800">Công Cụ Minh Họa Phí Bảo Hiểm</h1>
        </header>

        <div class="space-y-8">
            <!-- Section 1: Thông Tin Người Được Bảo Hiểm Chính -->
            <section id="main-person-container" class="person-container space-y-6 bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-semibold text-gray-800">1. Thông Tin Người Được Bảo Hiểm Chính</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="name-main" class="font-medium text-gray-700 block mb-1">Họ và Tên</label>
                        <input type="text" id="name-main" class="form-input name-input" placeholder="Trần Thị B">
                        <p class="error-message text-red-600 text-sm mt-1 hidden"></p>
                        <p class="input-hint text-gray-500 text-sm mt-1">Nhập họ và tên đầy đủ</p>
                    </div>
                    <div>
                        <label for="dob-main" class="font-medium text-gray-700 block mb-1">Ngày sinh</label>
                        <input type="text" id="dob-main" class="form-input dob-input" placeholder="DD/MM/YYYY">
                        <p class="error-message text-red-600 text-sm mt-1 hidden"></p>
                        <p class="input-hint text-gray-500 text-sm mt-1">Nhập theo DD/MM/YYYY</p>
                    </div>
                    <div>
                        <label for="gender-main" class="font-medium text-gray-700 block mb-1">Giới tính</label>
                        <select id="gender-main" class="form-select gender-select">
                            <option value="Nam">Nam</option>
                            <option value="Nữ">Nữ</option>
                        </select>
                    </div>
                    <div class="flex items-end space-x-4">
                        <p class="text-lg">Tuổi: <span id="age-main" class="font-bold text-aia-red age-span">0</span></p>
                    </div>
                    <div class="relative">
                        <label for="occupation-input-main" class="font-medium text-gray-700 block mb-1">Nghề nghiệp</label>
                        <input type="text" id="occupation-input-main" class="form-input occupation-input" placeholder="Gõ để tìm nghề nghiệp...">
                        <p class="error-message text-red-600 text-sm mt-1 hidden"></p>
                        <p class="input-hint text-gray-500 text-sm mt-1">Chọn nghề nghiệp từ danh sách</p>
                        <div class="occupation-autocomplete absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 hidden max-h-60 overflow-y-auto"></div>
                    </div>
                    <div class="flex items-end space-x-4">
                        <p class="text-lg">Nhóm nghề: <span id="risk-group-main" class="font-bold text-aia-red risk-group-span">...</span></p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Lựa Chọn Sản Phẩm Chính -->
            <section class="space-y-6 bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-semibold text-gray-800">2. Lựa Chọn Sản Phẩm Chính</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="main-product" class="font-medium text-gray-700 block mb-1">Sản phẩm chính</label>
                        <select id="main-product" class="form-select">
                            <option value="">-- Chọn sản phẩm chính --</option>
                            <option value="PUL_TRON_DOI">PUL Trọn đời</option>
                            <option value="PUL_15_NAM">PUL 15 năm</option>
                            <option value="PUL_5_NAM">PUL 5 năm</option>
                            <option value="KHOE_BINH_AN">MUL - Khoẻ Bình An</option>
                            <option value="VUNG_TUONG_LAI">MUL - Vững Tương Lai</option>
                            <option value="TRON_TAM_AN">Trọn Tâm An</option>
                            <option value="AN_BINH_UU_VIET">An Bình Ưu Việt</option>
                        </select>
                    </div>
                    <div id="payment-term-container">
                        <label for="payment-term" class="font-medium text-gray-700 block mb-1">Thời hạn đóng phí</label>
                        <input type="number" id="payment-term" class="form-input" placeholder="Nhập số năm">
                        <p class="error-message text-red-600 text-sm mt-1 hidden"></p>
                        <p class="input-hint text-gray-500 text-sm mt-1"></p>
                    </div>
                    <div id="abuv-term-container" class="hidden">
                        <label for="abuv-term" class="font-medium text-gray-700 block mb-1">Thời hạn đóng phí</label>
                        <select id="abuv-term" class="form-select">
                            <option value="5">5 năm</option>
                            <option value="10">10 năm</option>
                            <option value="15">15 năm</option>
                        </select>
                    </div>
                    <div>
                        <label for="payment-frequency" class="font-medium text-gray-700 block mb-1">Kỳ đóng phí</label>
                        <select id="payment-frequency" class="form-select">
                            <option value="yearly">Năm</option>
                            <option value="quarterly">Quý</option>
                            <option value="semi-annually">Nửa năm</option>
                        </select>
                    </div>
                </div>
            </section>

            <!-- Section 3: Lựa Chọn Sản Phẩm Bổ Sung (Cho NĐBH Chính) -->
            <section id="main-supp-container" class="space-y-6 bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-semibold text-gray-800">3. Lựa Chọn Sản Phẩm Bổ Sung (Cho NĐBH Chính)</h2>
                <div class="supplementary-products-container space-y-6">
                    <!-- Sức khỏe Bùng Gia Lực -->
                    <div class="product-section health-scl-section">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" class="form-checkbox health-scl-checkbox">
                            <span class="text-lg font-medium text-gray-800">Sức khỏe Bùng Gia Lực</span>
                        </label>
                        <div class="product-options hidden mt-3 pl-8 space-y-4 border-l-2 border-gray-200">
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div>
                                    <label class="font-medium text-gray-700 block mb-1">Quyền lợi chính (Bắt buộc)</label>
                                    <select class="form-select health-scl-program" disabled>
                                        <option value="">-- Chọn chương trình --</option>
                                        <option value="co_ban">Cơ bản</option>
                                        <option value="nang_cao">Nâng cao</option>
                                        <option value="toan_dien">Toàn diện</option>
                                        <option value="hoan_hao">Hoàn hảo</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="font-medium text-gray-700 block mb-1">Phạm vi địa lý</label>
                                    <select class="form-select health-scl-scope" disabled>
                                        <option value="main_vn">Việt Nam</option>
                                        <option value="main_global">Toàn cầu (trừ Hoa Kỳ)</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <span class="font-medium text-gray-700 block mb-2">Quyền lợi tùy chọn:</span>
                                <div class="space-y-2">
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="form-checkbox health-scl-outpatient" disabled>
                                        <span>Điều trị ngoại trú</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="form-checkbox health-scl-dental" disabled>
                                        <span>Chăm sóc nha khoa</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-right font-semibold text-aia-red fee-display min-h-[1.5rem]"></div>
                        </div>
                    </div>
                    <!-- Bệnh Hiểm Nghèo 2.0 -->
                    <div class="product-section bhn-section">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" class="form-checkbox bhn-checkbox">
                            <span class="text-lg font-medium text-gray-800">Bệnh Hiểm Nghèo 2.0</span>
                        </label>
                        <div class="product-options hidden mt-3 pl-8 space-y-3 border-l-2 border-gray-200">
                            <div>
                                <label class="font-medium text-gray-700 block mb-1">Số tiền bảo hiểm (STBH)</label>
                                <input type="text" class="form-input bhn-stbh" placeholder="VD: 500.000.000">
                                <p class="error-message text-red-600 text-sm mt-1 hidden"></p>
                            </div>
                            <div class="text-right font-semibold text-aia-red fee-display min-h-[1.5rem]"></div>
                        </div>
                    </div>
                    <!-- Bảo hiểm Tai nạn -->
                    <div class="product-section accident-section">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" class="form-checkbox accident-checkbox">
                            <span class="text-lg font-medium text-gray-800">Bảo hiểm Tai nạn</span>
                        </label>
                        <div class="product-options hidden mt-3 pl-8 space-y-3 border-l-2 border-gray-200">
                            <div>
                                <label class="font-medium text-gray-700 block mb-1">Số tiền bảo hiểm (STBH)</label>
                                <input type="text" class="form-input accident-stbh" placeholder="VD: 200.000.000">
                                <p class="error-message text-red-600 text-sm mt-1 hidden"></p>
                            </div>
                            <div class="text-right font-semibold text-aia-red fee-display min-h-[1.5rem]"></div>
                        </div>
                    </div>
                    <!-- Hỗ trợ chi phí nằm viện -->
                    <div class="product-section hospital-support-section">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" class="form-checkbox hospital-support-checkbox">
                            <span class="text-lg font-medium text-gray-800">Hỗ trợ chi phí nằm viện</span>
                        </label>
                        <div class="product-options hidden mt-3 pl-8 space-y-3 border-l-2 border-gray-200">
                            <div>
                                <label class="font-medium text-gray-700 block mb-1">Số tiền hỗ trợ/ngày</label>
                                <input type="text" class="form-input hospital-support-stbh" placeholder="VD: 300.000">
                                <p class="error-message text-red-600 text-sm mt-1 hidden"></p>
                                <p class="hospital-support-validation text-sm text-gray-500 mt-1"></p>
                            </div>
                            <div class="text-right font-semibold text-aia-red fee-display min-h-[1.5rem]"></div>
                        </div>
                    </div>
                    <!-- Miễn đóng phí 3.0 -->
                    <div class="product-section waiver-premium-section">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" class="form-checkbox waiver-premium-checkbox">
                            <span class="text-lg font-medium text-gray-800">Miễn đóng phí 3.0</span>
                        </label>
                        <div class="product-options hidden mt-3 pl-8 space-y-3 border-l-2 border-gray-200">
                            <div>
                                <label class="font-medium text-gray-700 block mb-1">Số tiền bảo hiểm (STBH)</label>
                                <input type="text" class="form-input waiver-premium-stbh" placeholder="VD: 500.000.000">
                                <p class="error-message text-red-600 text-sm mt-1 hidden"></p>
                            </div>
                            <div class="text-right font-semibold text-aia-red fee-display min-h-[1.5rem]"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 4: Người Được Bảo Hiểm Bổ Sung -->
            <section id="supplementary-insured-container" class="space-y-6 bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-semibold text-gray-800">4. Người Được Bảo Hiểm Bổ Sung</h2>
                <div id="add-supp-insured-btn" class="text-center">
                    <button class="bg-aia-red text-white px-4 py-2 rounded-lg hover:bg-red-700">+ Thêm Người Được Bảo Hiểm Bổ Sung</button>
                </div>
            </section>

            <!-- Section 5: Tóm Tắt Phí Bảo Hiểm -->
            <section class="space-y-6 bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-semibold text-gray-800">Tóm Tắt Phí Bảo Hiểm</h2>
                <div class="space-y-4">
                    <div class="flex justify-between">
                        <span class="font-medium text-gray-700">Phí sản phẩm chính:</span>
                        <span id="main-fee" class="font-semibold text-aia-red">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="font-medium text-gray-700">Tổng phí năm đầu:</span>
                        <span id="total-fee" class="font-semibold text-aia-red">0</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <div>
                            <label for="target-age-input" class="font-medium text-gray-700 block mb-1">Minh họa phí đến năm (tuổi NĐBH chính)</label>
                            <input type="number" id="target-age-input" class="form-input w-24" placeholder="Tuổi">
                        </div>
                        <button id="view-summary-btn" class="bg-aia-red text-white px-4 py-2 rounded-lg hover:bg-red-700">Xem Bảng Minh Họa Chi Tiết</button>
                    </div>
                </div>
            </section>

            <footer class="text-center text-gray-600 mt-8">
                <p>© 2025 Bản quyền thuộc về Tập đoàn AIA (AIA Group Limited) | Công cụ chỉ mang tính chất minh họa.</p>
            </footer>
        </div>

        <!-- Modal Bảng Tóm Tắt -->
        <div id="summary-modal" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center hidden">
            <div class="bg-white p-6 rounded-lg max-w-4xl w-full max-h-[80vh] overflow-y-auto">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Bảng Tóm Tắt Quyền Lợi và Phí</h2>
                <button id="close-summary-modal-btn" class="absolute top-4 right-4 text-gray-600 hover:text-gray-800">×</button>
                <div id="summary-table"></div>
            </div>
        </div>
    </div>

    <script type="module" src="logic.js"></script>
    <script type="module" src="data.js"></script>
</body>
</html>
